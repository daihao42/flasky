{% extends '__base__.html' %}

{% block title %}Flasky - Post{% endblock %}

{% import "_macros.html" as macros %} <!--分页宏-->

{% block beforehead %}

{% endblock %}

{% block content %}

<div class="profile-thumbnail">
			<a href="{{ url_for('.user', username=post.author.username) }}">
			<img class="img-rounded profile-thumbnail" src="{{ post.author.image }}"></a>
		</div>
		<h2> {{ post.title }} </h2>
		<div class="post-date">{{ moment(post.timestamp).fromNow() }}</div>
		<div class="post-author">
			<a href="{{ url_for('.user', username=post.author.username) }}">
				{{ post.author.username }}</a>
		</div>
		<div class="post-body">{{ post.body_html|safe }}</div>

		<div class="post-footer">
			{% if current_user == post.author %}
			<a href="{{ url_for('.edit', id=post.id) }}">
			<span class="label label-primary">Edit</span>
			</a>
			{% elif current_user.is_administrator() %}
			<a href="{{ url_for('.edit', id=post.id) }}">
			<span class="label label-danger">Edit [Admin]</span>
			</a>
			{% endif %}
		</div>

		{% if current_user.is_authenticated %}
		<div>
			<form action="{{ url_for('.post', id=post.id) }}" method="POST">
				<textarea name="body"></textarea>
				<input type="submit"></input>
			</form>
		</div>
		{% endif %}

		<!-- comment的显示页面 -->
		{% include '_comments.html' %}

<!--分页-->
<div class="pagination">
{{ macros.pagination_widget(pagination, '.post', id = post.id) }}
</div>



{% endblock %}